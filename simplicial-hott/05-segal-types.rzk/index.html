
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Segal Types - yoneda</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#segal-types" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="yoneda" class="md-header__button md-logo" aria-label="yoneda" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            yoneda
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Segal Types
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/emilyriehl/yoneda" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    emilyriehl/yoneda
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="yoneda" class="md-nav__button md-logo" aria-label="yoneda" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    yoneda
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/emilyriehl/yoneda" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    emilyriehl/yoneda
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          General
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="General" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          General
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        About
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          HoTT
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HoTT" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          HoTT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/00-common.rzk/" class="md-nav__link">
        Common
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/01-paths.rzk/" class="md-nav__link">
        Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/02-homotopies.rzk/" class="md-nav__link">
        Homotopies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/03-equivalences.rzk/" class="md-nav__link">
        Equivalences
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/04-sigma.rzk/" class="md-nav__link">
        Sigma types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/05-contractible.rzk/" class="md-nav__link">
        Contractible
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/06-fibers.rzk/" class="md-nav__link">
        Fibers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/07-propositions.rzk/" class="md-nav__link">
        Propositions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hott/08-trivial-fibrations.rzk/" class="md-nav__link">
        Trivial fibrations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Simplicial HoTT
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Simplicial HoTT" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Simplicial HoTT
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03-simplicial-type-theory.rzk/" class="md-nav__link">
        Simplicial Type Theory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04-extension-types.rzk/" class="md-nav__link">
        Extension Types
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Segal Types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Segal Types
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hom-types" class="md-nav__link">
    Hom types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-segal-condition" class="md-nav__link">
    The Segal condition
  </a>
  
    <nav class="md-nav" aria-label="The Segal condition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#characterizing-segal-types" class="md-nav__link">
    Characterizing Segal types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segal-function-and-extension-types" class="md-nav__link">
    Segal function and extension types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#associativity" class="md-nav__link">
    Associativity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homotopies" class="md-nav__link">
    Homotopies
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06-2cat-of-segal-types.rzk/" class="md-nav__link">
        2-Category of Segal Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07-discrete.rzk/" class="md-nav__link">
        Discrete Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../08-covariant.rzk/" class="md-nav__link">
        Covariantly Functorial Type Families
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../09-yoneda.rzk/" class="md-nav__link">
        The Yoneda Lemma
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10-rezk-types.rzk/" class="md-nav__link">
        Rezk Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12-cocartesian.rzk/" class="md-nav__link">
        Cocartesian Families
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hom-types" class="md-nav__link">
    Hom types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-segal-condition" class="md-nav__link">
    The Segal condition
  </a>
  
    <nav class="md-nav" aria-label="The Segal condition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#characterizing-segal-types" class="md-nav__link">
    Characterizing Segal types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segal-function-and-extension-types" class="md-nav__link">
    Segal function and extension types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#associativity" class="md-nav__link">
    Associativity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homotopies" class="md-nav__link">
    Homotopies
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/emilyriehl/yoneda/edit/master/src/simplicial-hott/05-segal-types.rzk.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="segal-types">Segal Types<a class="headerlink" href="#segal-types" title="Permanent link">&para;</a></h1>
<p>These formalisations correspond to Section 5 of RS17 paper.</p>
<p>This is a literate <code>rzk</code> file:</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">#lang</span><span class="p"> </span><span class="s">rzk-1</span>
</span></code></pre></div>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><code>hott/1-paths.md</code> - We require basic path algebra.</li>
<li><code>hott/2-contractible.md</code> - We require the notion of contractible types and
  their data.</li>
<li><code>hott/total-space.md</code> — We rely on <code>contractible-fibers-projection-equiv</code> and
  <code>total-space-projection</code> in the proof of Theorem 5.5.</li>
<li><code>3-simplicial-type-theory.md</code> — We rely on definitions of simplicies and their
  subshapes.</li>
<li><code>4-extension-types.md</code> — We use the fubini theorem and extension
  extensionality.</li>
</ul>
<h2 id="hom-types">Hom types<a class="headerlink" href="#hom-types" title="Permanent link">&para;</a></h2>
<p>Extension types are used ∂to define the type of arrows between fixed terms:</p>
<p><svg style="float: right" viewBox="0 0 200 60" width="150" height="60">
  <polyline points="40,30 160,30" stroke="blue" stroke-width="3" marker-end="url(#arrow-blue)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">y</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c">-- [RS17, Definition 5.1]</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c">-- The type of arrows in A from x to y.</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">hom</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)   </span><span class="c">-- A type.</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A) </span><span class="c">-- Two points in A.</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="err">  : </span><span class="kt">U</span><span class="err">                   </span><span class="c">-- (hom A x y) is a 1-simplex (an arrow)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="err">  := </span><span class="p">(</span><span class="nv">t </span><span class="p">:</span><span class="err"> Δ¹) -&gt; A [    </span><span class="c">-- in A where</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="err">    t </span><span class="o">===</span><span class="err"> </span><span class="no">0_2</span><span class="err"> |-&gt; x,    </span><span class="c">-- * the left endpoint is exactly x</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="err">    t </span><span class="o">===</span><span class="err"> </span><span class="no">1_2</span><span class="err"> |-&gt; y     </span><span class="c">-- * the right endpoint is exactly y</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="err">  ]</span>
</span></code></pre></div>
<p>Extension types are also used to define the type of commutative triangles:</p>
<p><svg style="float: right" viewBox="0 0 200 200" width="150" height="200">
  <path style="fill: rgb(0,128,255,0.5); stroke-cap: round;" d="M 52 40 L 160 40 L 160 148 Z"></path>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="170,40 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="40,40 160,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">y</text>
  <text x="170" y="170">z</text>
  <text x="100" y="15">f</text>
  <text x="185" y="100">g</text>
  <text x="90" y="110">h</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c">-- [RS17, Definition 5.2]</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c">-- the type of commutative triangles in A</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">hom2</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)           </span><span class="c">-- A type.</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)       </span><span class="c">-- Three points in A.</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)   </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)   </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A x z)   </span><span class="c">-- An arrow in A from x to z.</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="err">  : </span><span class="kt">U</span><span class="err">                           </span><span class="c">-- (hom2 A x y z f g h) is a 2-simplex (triangle)</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="err">  := { (t1, t2) : Δ² } -&gt; A [   </span><span class="c">-- in A where</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="err">    t2 </span><span class="o">===</span><span class="err"> </span><span class="no">0_2</span><span class="err"> |-&gt; f t1,        </span><span class="c">-- * the top edge is exactly f,</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="err">    t1 </span><span class="o">===</span><span class="err"> </span><span class="no">1_2</span><span class="err"> |-&gt; g t2,        </span><span class="c">-- * the right edge is exactly g, and</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="err">    t2 </span><span class="o">===</span><span class="err"> t1  |-&gt; h t2         </span><span class="c">-- * the diagonal is exactly h</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="err">  ]</span>
</span></code></pre></div>
<h2 id="the-segal-condition">The Segal condition<a class="headerlink" href="#the-segal-condition" title="Permanent link">&para;</a></h2>
<p>A type is Segal if every composable pair of arrows has a unique composite. Note
this is a considerable simplification of the usual Segal condition, which also
requires homotopical uniqueness of higher-order composites.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c">-- [RS17, Definition 5.3]</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">isSegal</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)         </span><span class="c">-- A type.</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="err">  : </span><span class="kt">U</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="err">  := </span><span class="p">(</span><span class="nv">x </span><span class="p">:</span><span class="err"> A) -&gt; </span><span class="p">(</span><span class="nv">y </span><span class="p">:</span><span class="err"> A) -&gt; </span><span class="p">(</span><span class="nv">z </span><span class="p">:</span><span class="err"> A) -&gt;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="err">      </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y) -&gt; </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z) -&gt;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="err">      isContr</span><span class="p">( </span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), hom2 A x y z f g h)</span>
</span></code></pre></div>
<p>Segal types have a composition functor and witnesses to the composition
relation:</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c">-- Composition is written in diagrammatic order to match the order of arguments in isSegal.</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-comp</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)                   </span><span class="c">-- Three points in A.</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)               </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)               </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="err">  : hom A x z</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="err">  := </span><span class="no">first</span><span class="err"> (</span><span class="no">first</span><span class="err"> (AisSegal x y z f g))</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="c">-- Segal types have composition witnesses</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-comp-witness</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)                   </span><span class="c">-- Three points in A.</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)               </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)               </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="err">  : hom2 A x y z f g (Segal-comp A AisSegal x y z f g)</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="err">  := </span><span class="no">second</span><span class="err"> (</span><span class="no">first</span><span class="err"> (AisSegal x y z f g))</span>
</span></code></pre></div>
<p>Composition in a Segal type is unique in the following sense. If there is a
witness that an arrow h is a composite of f and g, then the specified composite
equals h.</p>
<p><svg style="float: right" viewBox="0 0 200 380" width="125">
  <path style="fill: rgb(175,175,175,0.5); stroke-cap: round;" d="M 52 40 L 160 40 L 160 148 Z"></path>
  <polyline points="40,30 160,30" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="170,45 170,160" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="40,40 160,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30" fill="grey">x</text>
  <text x="170" y="30" fill="grey">y</text>
  <text x="170" y="170" fill="grey">z</text>
  <text x="100" y="15" fill="grey">f</text>
  <text x="185" y="100" fill="grey">g</text>
  <text x="90" y="110">h</text>
  <text x="125" y="75" fill="grey">α</text>
  <text x="100" y="145" fill="red" rotate="90" style="font-size: 50px">=</text>
  <path style="fill: rgb(128,0,0,0.5); stroke-cap: round;" d="M 52 240 L 160 240 L 160 348 Z"></path>
  <polyline points="40,230 160,230" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="170,245 170,360" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="40,240 160,360" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <text x="30" y="230" fill="grey">x</text>
  <text x="170" y="230" fill="grey">y</text>
  <text x="170" y="370" fill="grey">z</text>
  <text x="100" y="215" fill="grey">f</text>
  <text x="185" y="300" fill="grey">g</text>
  <text x="90" y="310" transform="rotate(45, 90, 310)" fill="red">Segal-comp</text>
  <text x="120" y="280" fill="rgb(128,0,0)" transform="rotate(45, 120, 280)" style="font-size: 10px">Segal-comp-witness</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-comp-uniqueness</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)                   </span><span class="c">-- Three points in A.</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)               </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)               </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A x z)               </span><span class="c">-- An arrow in A from x to z.</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">alpha </span><span class="p">:</span><span class="err"> hom2 A x y z f g h)  </span><span class="c">-- A witness that h is a composite of f and g.</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="err">  : (Segal-comp A AisSegal x y z f g) = h</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="err">  := first-path-sigma</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="err">      (hom A x z)</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="err">      (</span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; hom2 A x y z f g k)</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="err">      (Segal-comp A AisSegal x y z f g,</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="err">        Segal-comp-witness A AisSegal x y z f g)</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="err">      (h, alpha)</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="err">      </span><span class="p">(</span><span class="nv">contracting-htpy</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="nv">        (Σ (k </span><span class="p">:</span><span class="err"> hom A x z), hom2 A x y z f g k)</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="err">        (AisSegal x y z f g)</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="err">        (h, alpha))</span>
</span></code></pre></div>
<h3 id="characterizing-segal-types">Characterizing Segal types<a class="headerlink" href="#characterizing-segal-types" title="Permanent link">&para;</a></h3>
<p>Our aim is to prove that a type is Segal if and only if the horn-restriction
map, defined below, is an equivalence.</p>
<p><svg style="float: right" viewBox="0 0 200 180" width="150" height="150">
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">y</text>
  <text x="170" y="170">z</text>
  <text x="100" y="15">f</text>
  <text x="185" y="100">g</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c">-- A pair of composable arrows form a horn.</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">horn</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)           </span><span class="c">-- A type.</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)       </span><span class="c">-- Three points in A.</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)   </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)   </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="err">  : Λ -&gt; A</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="err">  := \(t, s) -&gt; </span><span class="no">recOR</span><span class="err">(</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="err">    s </span><span class="o">===</span><span class="err"> </span><span class="no">0_2</span><span class="err"> |-&gt; f t,</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="err">    t </span><span class="o">===</span><span class="err"> </span><span class="no">1_2</span><span class="err"> |-&gt; g s</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="err">  )</span>
</span></code></pre></div>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c">-- The underlying horn of a simplex</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">horn-restriction</span><span class="err"> </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="err">  : (Δ² -&gt; A) -&gt; (Λ -&gt; A)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="err">  :=  </span><span class="p">\</span><span class="nv">f t </span><span class="err">-&gt; f t</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="c">-- An alternate definition of Segal types.</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">is-local-horn-inclusion</span><span class="err"> </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">) : </span><span class="kt">U</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="err">  := isEquiv (Δ² -&gt; A) (Λ -&gt; A) (horn-restriction A)</span>
</span></code></pre></div>
<p>Now we prove this definition is equivalent to the original one.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c">-- Here, we prove the equivalence used in [RS17, Theorem 5.5].</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c">-- However, we do this by constructing the equivalence directly,</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="c">-- instead of using a composition of equivalences, as it is easier to write down</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c">-- and it computes better (we can use refl for the witnesses of the equivalence).</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">compositions-are-horn-fillings</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)                   </span><span class="c">-- Three points in A.</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)               </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)               </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="err">  : Eq </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), hom2 A x y z f g h)</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="err">       &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t } -&gt; A [ Λ t |-&gt; horn A x y z f g t ]&gt;</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="err">  := (</span><span class="p">\</span><span class="nv">hh </span><span class="err">-&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; (</span><span class="no">second</span><span class="err"> hh) t,</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="err">      </span><span class="p">(</span><span class="nv">(\k -&gt; (\(t </span><span class="p">:</span><span class="err"> </span><span class="kt">2</span><span class="err">) -&gt; k (t, t), \(t, s) -&gt; k (t, s)), </span><span class="p">\</span><span class="nv">hh </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">),</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="err">       </span><span class="p">(</span><span class="nv">\k -&gt; (\(t </span><span class="p">:</span><span class="err"> </span><span class="kt">2</span><span class="err">) -&gt; k (t, t), \(t, s) -&gt; k (t, s)), </span><span class="p">\</span><span class="nv">hh </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">)))</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">equiv-horn-restriction</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="err">  : Eq (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A &gt;)</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (k </span><span class="p">:</span><span class="err"> &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;),</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="err">        </span><span class="kt">Σ</span><span class="err"> </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))),</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="err">          hom2 A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="err">                 (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (t, </span><span class="no">0_2</span><span class="err">)) (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err">, t)) h)</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="err">  := (</span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt;</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="err">      (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; k t,</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="err">        </span><span class="p">(</span><span class="nv">\(t </span><span class="p">:</span><span class="err"> </span><span class="kt">2</span><span class="err">) -&gt; k (t, t),</span>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="err">         \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; k t)),</span>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="err">      ((</span><span class="p">\</span><span class="nv">khh </span><span class="err">-&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; (</span><span class="no">second</span><span class="err"> (</span><span class="no">second</span><span class="err"> khh)) t, </span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">_{k}),</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="err">        (</span><span class="p">\</span><span class="nv">khh </span><span class="err">-&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; (</span><span class="no">second</span><span class="err"> (</span><span class="no">second</span><span class="err"> khh)) t, </span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">_{k})))</span>
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="c">-- [RS17, Theorem 5.5], the hard direction:</span>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-equiv-horn-restriction</span>
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="err">  : Eq (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A &gt;) (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;) </span><span class="c">-- (horn-restriction A)</span>
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="err">  := comp-equiv</span>
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="err">        (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A &gt;)</span>
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a><span class="err">        </span><span class="p">(</span><span class="nv">Σ (k </span><span class="p">:</span><span class="err"> &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;),</span>
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="err">            </span><span class="kt">Σ</span><span class="err"> </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))),</span>
</span><span id="__span-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a><span class="err">            hom2 A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="err">                    (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (t, </span><span class="no">0_2</span><span class="err">)) (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err">, t)) h)</span>
</span><span id="__span-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="err">        (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;)</span>
</span><span id="__span-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a><span class="err">        (equiv-horn-restriction A)</span>
</span><span id="__span-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="err">        (total-space-projection</span>
</span><span id="__span-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="err">            (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;)</span>
</span><span id="__span-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a><span class="err">            </span><span class="p">(</span><span class="nv">\k -&gt; Σ (h </span><span class="p">:</span><span class="err"> hom A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))),</span>
</span><span id="__span-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="err">                        hom2 A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="err">                            (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (t, </span><span class="no">0_2</span><span class="err">)) (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err">, t)) h),</span>
</span><span id="__span-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="err">        (contractible-fibers-projection-equiv</span>
</span><span id="__span-8-49"><a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a><span class="err">            (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;)</span>
</span><span id="__span-8-50"><a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="err">            </span><span class="p">(</span><span class="nv">\k -&gt; Σ (h </span><span class="p">:</span><span class="err"> hom A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))),</span>
</span><span id="__span-8-51"><a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="err">                        hom2 A (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-52"><a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="err">                            (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (t, </span><span class="no">0_2</span><span class="err">)) (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err">, t)) h)</span>
</span><span id="__span-8-53"><a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="err">            (</span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; AisSegal (k (</span><span class="no">0_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err">, </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-54"><a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a><span class="err">                            (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (t, </span><span class="no">0_2</span><span class="err">)) (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err">, t)))))</span>
</span><span id="__span-8-55"><a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a>
</span><span id="__span-8-56"><a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a><span class="c">-- Verify that the mapping in (Segal-equiv-horn-restriction A AisSegal)</span>
</span><span id="__span-8-57"><a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a><span class="c">-- is exactly (horn-restriction A)</span>
</span><span id="__span-8-58"><a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-equiv-horn-restriction-test</span>
</span><span id="__span-8-59"><a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-8-60"><a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-8-61"><a id="__codelineno-8-61" name="__codelineno-8-61" href="#__codelineno-8-61"></a><span class="err">  : (</span><span class="no">first</span><span class="err"> (Segal-equiv-horn-restriction A AisSegal)) = (horn-restriction A)</span>
</span><span id="__span-8-62"><a id="__codelineno-8-62" name="__codelineno-8-62" href="#__codelineno-8-62"></a><span class="err">  := </span><span class="no">refl</span>
</span><span id="__span-8-63"><a id="__codelineno-8-63" name="__codelineno-8-63" href="#__codelineno-8-63"></a>
</span><span id="__span-8-64"><a id="__codelineno-8-64" name="__codelineno-8-64" href="#__codelineno-8-64"></a><span class="c">-- Segal types are Segal&#39; types.</span>
</span><span id="__span-8-65"><a id="__codelineno-8-65" name="__codelineno-8-65" href="#__codelineno-8-65"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">isSegal-is-local-horn-inclusion</span>
</span><span id="__span-8-66"><a id="__codelineno-8-66" name="__codelineno-8-66" href="#__codelineno-8-66"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-8-67"><a id="__codelineno-8-67" name="__codelineno-8-67" href="#__codelineno-8-67"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-8-68"><a id="__codelineno-8-68" name="__codelineno-8-68" href="#__codelineno-8-68"></a><span class="err">  : is-local-horn-inclusion A</span>
</span><span id="__span-8-69"><a id="__codelineno-8-69" name="__codelineno-8-69" href="#__codelineno-8-69"></a><span class="err">  := </span><span class="no">second</span><span class="err"> (Segal-equiv-horn-restriction A AisSegal)</span>
</span><span id="__span-8-70"><a id="__codelineno-8-70" name="__codelineno-8-70" href="#__codelineno-8-70"></a>
</span><span id="__span-8-71"><a id="__codelineno-8-71" name="__codelineno-8-71" href="#__codelineno-8-71"></a><span class="c">-- Segal&#39; types are Segal types.</span>
</span><span id="__span-8-72"><a id="__codelineno-8-72" name="__codelineno-8-72" href="#__codelineno-8-72"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">is-segal-is-local-horn-inclusion</span>
</span><span id="__span-8-73"><a id="__codelineno-8-73" name="__codelineno-8-73" href="#__codelineno-8-73"></a><span class="err">  </span><span class="p">( </span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-8-74"><a id="__codelineno-8-74" name="__codelineno-8-74" href="#__codelineno-8-74"></a><span class="err">  </span><span class="p">( </span><span class="nv">is-local-horn-inclusion-A </span><span class="p">:</span><span class="err"> is-local-horn-inclusion A)</span>
</span><span id="__span-8-75"><a id="__codelineno-8-75" name="__codelineno-8-75" href="#__codelineno-8-75"></a><span class="err">  : isSegal A</span>
</span><span id="__span-8-76"><a id="__codelineno-8-76" name="__codelineno-8-76" href="#__codelineno-8-76"></a><span class="err">  :=</span>
</span><span id="__span-8-77"><a id="__codelineno-8-77" name="__codelineno-8-77" href="#__codelineno-8-77"></a><span class="err">    </span><span class="p">\ </span><span class="nv">x y z f g </span><span class="err">-&gt;</span>
</span><span id="__span-8-78"><a id="__codelineno-8-78" name="__codelineno-8-78" href="#__codelineno-8-78"></a><span class="err">    projection-equiv-contractible-fibers</span>
</span><span id="__span-8-79"><a id="__codelineno-8-79" name="__codelineno-8-79" href="#__codelineno-8-79"></a><span class="err">      ( &lt; {t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;)</span>
</span><span id="__span-8-80"><a id="__codelineno-8-80" name="__codelineno-8-80" href="#__codelineno-8-80"></a><span class="err">      </span><span class="p">( </span><span class="nv">\ k -&gt;</span>
</span><span id="__span-8-81"><a id="__codelineno-8-81" name="__codelineno-8-81" href="#__codelineno-8-81"></a><span class="nv">        Σ ( h </span><span class="p">:</span><span class="err"> hom A (k (</span><span class="no">0_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">1_2</span><span class="err">))) ,</span>
</span><span id="__span-8-82"><a id="__codelineno-8-82" name="__codelineno-8-82" href="#__codelineno-8-82"></a><span class="err">          ( hom2 A</span>
</span><span id="__span-8-83"><a id="__codelineno-8-83" name="__codelineno-8-83" href="#__codelineno-8-83"></a><span class="err">            ( k (</span><span class="no">0_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-84"><a id="__codelineno-8-84" name="__codelineno-8-84" href="#__codelineno-8-84"></a><span class="err">            ( </span><span class="p">\ </span><span class="nv">t </span><span class="err">-&gt; k (t , </span><span class="no">0_2</span><span class="err">))</span>
</span><span id="__span-8-85"><a id="__codelineno-8-85" name="__codelineno-8-85" href="#__codelineno-8-85"></a><span class="err">            ( </span><span class="p">\ </span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err"> , t))</span>
</span><span id="__span-8-86"><a id="__codelineno-8-86" name="__codelineno-8-86" href="#__codelineno-8-86"></a><span class="err">            ( h)))</span>
</span><span id="__span-8-87"><a id="__codelineno-8-87" name="__codelineno-8-87" href="#__codelineno-8-87"></a><span class="err">      </span><span class="p">( </span><span class="nv">second</span>
</span><span id="__span-8-88"><a id="__codelineno-8-88" name="__codelineno-8-88" href="#__codelineno-8-88"></a><span class="nv">        ( comp-equiv</span>
</span><span id="__span-8-89"><a id="__codelineno-8-89" name="__codelineno-8-89" href="#__codelineno-8-89"></a><span class="nv">          ( Σ ( k </span><span class="p">:</span><span class="err"> &lt; {t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;) ,</span>
</span><span id="__span-8-90"><a id="__codelineno-8-90" name="__codelineno-8-90" href="#__codelineno-8-90"></a><span class="err">            </span><span class="kt">Σ</span><span class="err"> </span><span class="p">( </span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A (k (</span><span class="no">0_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">1_2</span><span class="err">))) ,</span>
</span><span id="__span-8-91"><a id="__codelineno-8-91" name="__codelineno-8-91" href="#__codelineno-8-91"></a><span class="err">              ( hom2 A</span>
</span><span id="__span-8-92"><a id="__codelineno-8-92" name="__codelineno-8-92" href="#__codelineno-8-92"></a><span class="err">                ( k (</span><span class="no">0_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-93"><a id="__codelineno-8-93" name="__codelineno-8-93" href="#__codelineno-8-93"></a><span class="err">                ( </span><span class="p">\ </span><span class="nv">t </span><span class="err">-&gt; k (t , </span><span class="no">0_2</span><span class="err">))</span>
</span><span id="__span-8-94"><a id="__codelineno-8-94" name="__codelineno-8-94" href="#__codelineno-8-94"></a><span class="err">                ( </span><span class="p">\ </span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err"> , t))</span>
</span><span id="__span-8-95"><a id="__codelineno-8-95" name="__codelineno-8-95" href="#__codelineno-8-95"></a><span class="err">                ( h)))</span>
</span><span id="__span-8-96"><a id="__codelineno-8-96" name="__codelineno-8-96" href="#__codelineno-8-96"></a><span class="err">          ( &lt; {t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A &gt;)</span>
</span><span id="__span-8-97"><a id="__codelineno-8-97" name="__codelineno-8-97" href="#__codelineno-8-97"></a><span class="err">          ( &lt; {t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;)</span>
</span><span id="__span-8-98"><a id="__codelineno-8-98" name="__codelineno-8-98" href="#__codelineno-8-98"></a><span class="err">          ( inv-equiv</span>
</span><span id="__span-8-99"><a id="__codelineno-8-99" name="__codelineno-8-99" href="#__codelineno-8-99"></a><span class="err">            ( &lt; {t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A &gt;)</span>
</span><span id="__span-8-100"><a id="__codelineno-8-100" name="__codelineno-8-100" href="#__codelineno-8-100"></a><span class="err">            </span><span class="p">( </span><span class="nv">Σ ( k </span><span class="p">:</span><span class="err"> &lt; {t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A &gt;) ,</span>
</span><span id="__span-8-101"><a id="__codelineno-8-101" name="__codelineno-8-101" href="#__codelineno-8-101"></a><span class="err">              </span><span class="kt">Σ</span><span class="err"> </span><span class="p">( </span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A (k (</span><span class="no">0_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">1_2</span><span class="err">))) ,</span>
</span><span id="__span-8-102"><a id="__codelineno-8-102" name="__codelineno-8-102" href="#__codelineno-8-102"></a><span class="err">                ( hom2 A</span>
</span><span id="__span-8-103"><a id="__codelineno-8-103" name="__codelineno-8-103" href="#__codelineno-8-103"></a><span class="err">                  ( k (</span><span class="no">0_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">0_2</span><span class="err">)) (k (</span><span class="no">1_2</span><span class="err"> , </span><span class="no">1_2</span><span class="err">))</span>
</span><span id="__span-8-104"><a id="__codelineno-8-104" name="__codelineno-8-104" href="#__codelineno-8-104"></a><span class="err">                  ( </span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (t , </span><span class="no">0_2</span><span class="err">))</span>
</span><span id="__span-8-105"><a id="__codelineno-8-105" name="__codelineno-8-105" href="#__codelineno-8-105"></a><span class="err">                  ( </span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (</span><span class="no">1_2</span><span class="err"> , t))</span>
</span><span id="__span-8-106"><a id="__codelineno-8-106" name="__codelineno-8-106" href="#__codelineno-8-106"></a><span class="err">                  ( h)))</span>
</span><span id="__span-8-107"><a id="__codelineno-8-107" name="__codelineno-8-107" href="#__codelineno-8-107"></a><span class="err">            ( equiv-horn-restriction A))</span>
</span><span id="__span-8-108"><a id="__codelineno-8-108" name="__codelineno-8-108" href="#__codelineno-8-108"></a><span class="err">          ( horn-restriction A , is-local-horn-inclusion-A)))</span>
</span><span id="__span-8-109"><a id="__codelineno-8-109" name="__codelineno-8-109" href="#__codelineno-8-109"></a><span class="err">    ( horn A x y z f g)</span>
</span><span id="__span-8-110"><a id="__codelineno-8-110" name="__codelineno-8-110" href="#__codelineno-8-110"></a>
</span><span id="__span-8-111"><a id="__codelineno-8-111" name="__codelineno-8-111" href="#__codelineno-8-111"></a><span class="c">-- [RS17, Theorem 5.5] proves that both notions of Segal types are logically equivalent.</span>
</span><span id="__span-8-112"><a id="__codelineno-8-112" name="__codelineno-8-112" href="#__codelineno-8-112"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">isSegal-iff-is-local-horn-inclusion</span>
</span><span id="__span-8-113"><a id="__codelineno-8-113" name="__codelineno-8-113" href="#__codelineno-8-113"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-8-114"><a id="__codelineno-8-114" name="__codelineno-8-114" href="#__codelineno-8-114"></a><span class="err">  : iff (isSegal A) (is-local-horn-inclusion A)</span>
</span><span id="__span-8-115"><a id="__codelineno-8-115" name="__codelineno-8-115" href="#__codelineno-8-115"></a><span class="err">  := (isSegal-is-local-horn-inclusion A , is-segal-is-local-horn-inclusion A)</span>
</span></code></pre></div>
<h2 id="segal-function-and-extension-types">Segal function and extension types<a class="headerlink" href="#segal-function-and-extension-types" title="Permanent link">&para;</a></h2>
<p>Using the new characterization of Segal types, we can show that the type of
functions or extensions into a family of Segal types is again a Segal type.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c">-- [RS17, Corollary 5.6(i)] : if X is a type and A : X -&gt; U is such that</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="c">-- A(x) is a Segal type for all x then (x : X) -&gt; A x is a Segal type</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-function-types</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">funext </span><span class="p">:</span><span class="err"> FunExt)                                 </span><span class="c">-- This proof uses function extensionality.</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">X </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                                           </span><span class="c">-- A type.</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="p">(</span><span class="nv">_ </span><span class="p">:</span><span class="err"> X) -&gt; </span><span class="kt">U</span><span class="err">)                                </span><span class="c">-- A type family</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">fiberwiseAisSegal </span><span class="p">:</span><span class="err"> </span><span class="p">(</span><span class="nv">x </span><span class="p">:</span><span class="err"> X) -&gt; is-local-horn-inclusion (A x))   </span><span class="c">-- An assumption that the fibers are Segal types.</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="err">  : is-local-horn-inclusion </span><span class="p">(</span><span class="nv">(x </span><span class="p">:</span><span class="err"> X) -&gt; A x)</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="err">  := triple_compose_isEquiv</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="err">       (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; </span><span class="p">(</span><span class="nv">(x </span><span class="p">:</span><span class="err"> X) -&gt; A x) &gt;)</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="err">       </span><span class="p">(</span><span class="nv">(x </span><span class="p">:</span><span class="err"> X) -&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A x &gt;)</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="err">       </span><span class="p">(</span><span class="nv">(x </span><span class="p">:</span><span class="err"> X) -&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A x &gt;)</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="err">       (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; </span><span class="p">(</span><span class="nv">(x </span><span class="p">:</span><span class="err"> X) -&gt; A x) &gt;)</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="err">        (</span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; </span><span class="p">\</span><span class="nv">x </span><span class="err">-&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; g t x) </span><span class="c">-- first equivalence</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="err">            (</span><span class="no">second</span><span class="err"> (flip-ext-fun</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="err">              (</span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err">)</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="err">              Δ² (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; </span><span class="no">BOT</span><span class="err">)</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="err">              X</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="err">              (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A)</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="err">              (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | </span><span class="no">BOT</span><span class="err">} -&gt; </span><span class="no">recBOT</span><span class="err">)))</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="err">        (</span><span class="p">\</span><span class="nv">h </span><span class="err">-&gt; </span><span class="p">\</span><span class="nv">x </span><span class="err">-&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; h x t) </span><span class="c">-- second equivalence</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="err">          (</span><span class="no">second</span><span class="err"> (fibered-Eq-function-Eq</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="err">              funext</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="err">              X</span>
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="err">              (</span><span class="p">\</span><span class="nv">x </span><span class="err">-&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A x &gt;)</span>
</span><span id="__span-9-26"><a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="err">              (</span><span class="p">\</span><span class="nv">x </span><span class="err">-&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A x &gt;)</span>
</span><span id="__span-9-27"><a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="err">              (</span><span class="p">\</span><span class="nv">x </span><span class="err">-&gt; (horn-restriction (A x) , fiberwiseAisSegal x))))</span>
</span><span id="__span-9-28"><a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="err">        (</span><span class="p">\</span><span class="nv">h </span><span class="err">-&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; </span><span class="p">\</span><span class="nv">x </span><span class="err">-&gt; (h x) t) </span><span class="c">-- third equivalence</span>
</span><span id="__span-9-29"><a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="err">          (</span><span class="no">second</span><span class="err">(flip-ext-fun-inv</span>
</span><span id="__span-9-30"><a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="err">            (</span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err">)</span>
</span><span id="__span-9-31"><a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="err">            Λ (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; </span><span class="no">BOT</span><span class="err">)</span>
</span><span id="__span-9-32"><a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="err">            X</span>
</span><span id="__span-9-33"><a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="err">            (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A)</span>
</span><span id="__span-9-34"><a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="err">            (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | </span><span class="no">BOT</span><span class="err">} -&gt; </span><span class="no">recBOT</span><span class="err">)))</span>
</span><span id="__span-9-35"><a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a>
</span><span id="__span-9-36"><a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a><span class="c">-- [RS17, Corollary 5.6(ii)] : if X is a shape and A : X -&gt; U is such that</span>
</span><span id="__span-9-37"><a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a><span class="c">-- A(x) is a Segal type for all x then (x : X) -&gt; A x is a Segal type</span>
</span><span id="__span-9-38"><a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-extension-types</span>
</span><span id="__span-9-39"><a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)                                             </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-9-40"><a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a><span class="err">  </span><span class="p">(</span><span class="nv">I </span><span class="p">:</span><span class="err"> </span><span class="kt">CUBE</span><span class="err">)                                                    </span><span class="c">-- A cube.</span>
</span><span id="__span-9-41"><a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a><span class="err">  </span><span class="p">(</span><span class="nv">ψ </span><span class="p">:</span><span class="err"> </span><span class="p">(</span><span class="nv">s </span><span class="p">:</span><span class="err"> I) -&gt; </span><span class="kt">TOPE</span><span class="err">)                                       </span><span class="c">-- A tope.</span>
</span><span id="__span-9-42"><a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> &lt;{s : I | ψ s} -&gt; </span><span class="kt">U</span><span class="err"> &gt;)                                 </span><span class="c">-- An extension type.</span>
</span><span id="__span-9-43"><a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a><span class="err">  </span><span class="p">(</span><span class="nv">fiberwiseAisSegal </span><span class="p">:</span><span class="err"> &lt;{s : I | ψ s} -&gt; is-local-horn-inclusion (A s) &gt;)    </span><span class="c">-- An assumption that the fibers are Segal types.</span>
</span><span id="__span-9-44"><a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a><span class="err">  : is-local-horn-inclusion (&lt;{s : I | ψ s} -&gt; A s &gt;)</span>
</span><span id="__span-9-45"><a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a><span class="err">  := triple_compose_isEquiv</span>
</span><span id="__span-9-46"><a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a><span class="err">        (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; &lt;{s : I | ψ s} -&gt; A s &gt; &gt;)</span>
</span><span id="__span-9-47"><a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a><span class="err">        (&lt;{s : I | ψ s} -&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A s &gt; &gt;)</span>
</span><span id="__span-9-48"><a id="__codelineno-9-48" name="__codelineno-9-48" href="#__codelineno-9-48"></a><span class="err">        (&lt;{s : I | ψ s} -&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A s &gt; &gt;)</span>
</span><span id="__span-9-49"><a id="__codelineno-9-49" name="__codelineno-9-49" href="#__codelineno-9-49"></a><span class="err">        (&lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; &lt;{s : I | ψ s} -&gt; A s &gt; &gt;)</span>
</span><span id="__span-9-50"><a id="__codelineno-9-50" name="__codelineno-9-50" href="#__codelineno-9-50"></a><span class="err">        (</span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; \{s : I | ψ s} -&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; g t s)  </span><span class="c">-- first equivalence</span>
</span><span id="__span-9-51"><a id="__codelineno-9-51" name="__codelineno-9-51" href="#__codelineno-9-51"></a><span class="err">            (</span><span class="no">second</span><span class="err">(fubini</span>
</span><span id="__span-9-52"><a id="__codelineno-9-52" name="__codelineno-9-52" href="#__codelineno-9-52"></a><span class="err">              (</span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err">)</span>
</span><span id="__span-9-53"><a id="__codelineno-9-53" name="__codelineno-9-53" href="#__codelineno-9-53"></a><span class="err">              I</span>
</span><span id="__span-9-54"><a id="__codelineno-9-54" name="__codelineno-9-54" href="#__codelineno-9-54"></a><span class="err">              Δ²</span>
</span><span id="__span-9-55"><a id="__codelineno-9-55" name="__codelineno-9-55" href="#__codelineno-9-55"></a><span class="err">              (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; </span><span class="no">BOT</span><span class="err">)</span>
</span><span id="__span-9-56"><a id="__codelineno-9-56" name="__codelineno-9-56" href="#__codelineno-9-56"></a><span class="err">              ψ</span>
</span><span id="__span-9-57"><a id="__codelineno-9-57" name="__codelineno-9-57" href="#__codelineno-9-57"></a><span class="err">              (\{s : I | ψ s} -&gt; </span><span class="no">BOT</span><span class="err">)</span>
</span><span id="__span-9-58"><a id="__codelineno-9-58" name="__codelineno-9-58" href="#__codelineno-9-58"></a><span class="err">              (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; \{s : I | ψ s} -&gt; A s)</span>
</span><span id="__span-9-59"><a id="__codelineno-9-59" name="__codelineno-9-59" href="#__codelineno-9-59"></a><span class="err">              (\{u : (</span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err">) * I | </span><span class="no">BOT</span><span class="err">} -&gt; </span><span class="no">recBOT</span><span class="err">)))</span>
</span><span id="__span-9-60"><a id="__codelineno-9-60" name="__codelineno-9-60" href="#__codelineno-9-60"></a><span class="err">        (</span><span class="p">\</span><span class="nv">h </span><span class="err">-&gt; \{s : I | ψ s} -&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; h s t) </span><span class="c">-- second equivalence</span>
</span><span id="__span-9-61"><a id="__codelineno-9-61" name="__codelineno-9-61" href="#__codelineno-9-61"></a><span class="err">          (</span><span class="no">second</span><span class="err"> (fibered-Eq-extension-Eq extext I ψ</span>
</span><span id="__span-9-62"><a id="__codelineno-9-62" name="__codelineno-9-62" href="#__codelineno-9-62"></a><span class="err">            (\{s : I | ψ s} -&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² t} -&gt; A s &gt;)</span>
</span><span id="__span-9-63"><a id="__codelineno-9-63" name="__codelineno-9-63" href="#__codelineno-9-63"></a><span class="err">            (\{s : I | ψ s} -&gt; &lt;{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A s &gt;)</span>
</span><span id="__span-9-64"><a id="__codelineno-9-64" name="__codelineno-9-64" href="#__codelineno-9-64"></a><span class="err">            (\{s : I | ψ s} -&gt; (horn-restriction (A s), fiberwiseAisSegal s))     ))</span>
</span><span id="__span-9-65"><a id="__codelineno-9-65" name="__codelineno-9-65" href="#__codelineno-9-65"></a><span class="err">        (</span><span class="p">\</span><span class="nv">h </span><span class="err">-&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; \{s : I | ψ s} -&gt; (h s) t) </span><span class="c">-- third equivalence</span>
</span><span id="__span-9-66"><a id="__codelineno-9-66" name="__codelineno-9-66" href="#__codelineno-9-66"></a><span class="err">          (</span><span class="no">second</span><span class="err">(fubini</span>
</span><span id="__span-9-67"><a id="__codelineno-9-67" name="__codelineno-9-67" href="#__codelineno-9-67"></a><span class="err">            I</span>
</span><span id="__span-9-68"><a id="__codelineno-9-68" name="__codelineno-9-68" href="#__codelineno-9-68"></a><span class="err">            (</span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err">)</span>
</span><span id="__span-9-69"><a id="__codelineno-9-69" name="__codelineno-9-69" href="#__codelineno-9-69"></a><span class="err">            ψ</span>
</span><span id="__span-9-70"><a id="__codelineno-9-70" name="__codelineno-9-70" href="#__codelineno-9-70"></a><span class="err">            (\{s : I | ψ s} -&gt; </span><span class="no">BOT</span><span class="err">)</span>
</span><span id="__span-9-71"><a id="__codelineno-9-71" name="__codelineno-9-71" href="#__codelineno-9-71"></a><span class="err">            Λ</span>
</span><span id="__span-9-72"><a id="__codelineno-9-72" name="__codelineno-9-72" href="#__codelineno-9-72"></a><span class="err">            (\{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; </span><span class="no">BOT</span><span class="err">)</span>
</span><span id="__span-9-73"><a id="__codelineno-9-73" name="__codelineno-9-73" href="#__codelineno-9-73"></a><span class="err">            (\{s : I | ψ s} -&gt; \{t : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Λ t} -&gt; A s)</span>
</span><span id="__span-9-74"><a id="__codelineno-9-74" name="__codelineno-9-74" href="#__codelineno-9-74"></a><span class="err">            (\{u : I * (</span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err">) | </span><span class="no">BOT</span><span class="err">} -&gt; </span><span class="no">recBOT</span><span class="err">)))</span>
</span></code></pre></div>
<p>In particular, the arrow type of a Segal type is Segal.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c">-- The type of arrows in a type.</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">arr</span><span class="err">        </span><span class="c">-- A type</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="err">  : </span><span class="kt">U</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="err">  := </span><span class="p">(</span><span class="nv">t </span><span class="p">:</span><span class="err"> Δ¹) -&gt; A</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="c">-- For later use, an equivalent characterization of the arrow type.</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Eq-arr</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="err">  : Eq (arr A) </span><span class="p">(</span><span class="nv">Σ (x </span><span class="p">:</span><span class="err"> A), </span><span class="p">(</span><span class="nv">Σ (y </span><span class="p">:</span><span class="err"> A), hom A x y))</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="err">  := (</span><span class="p">\</span><span class="nv">f </span><span class="err">-&gt; (f </span><span class="no">0_2</span><span class="err">, (f </span><span class="no">1_2</span><span class="err">, f)),</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="err">      ((\(x, (y, f)) -&gt; f, </span><span class="p">\</span><span class="nv">f </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">) ,</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="err">       (\(x, (y, f)) -&gt; f, </span><span class="p">\</span><span class="nv">xyf </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">)))</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="c">-- A special case of [RS17, Corollary 5.6(ii)], using is-Segal&#39;.</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal&#39;-arrow-types</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)                         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                                   </span><span class="c">-- A type.</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> is-local-horn-inclusion A)                   </span><span class="c">-- A proof that A is-local-horn-inclusion.</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="err">  : is-local-horn-inclusion (arr A)</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="err">  := Segal-extension-types</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="err">        extext</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="err">        </span><span class="kt">2</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="err">        Δ¹</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="err">        (\{t : </span><span class="kt">2</span><span class="err"> | Δ¹ t} -&gt; A)</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="err">        (\{t : </span><span class="kt">2</span><span class="err"> | Δ¹ t} -&gt; AisSegal)</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="c">-- A special case of [RS17, Corollary 5.6(ii)], using is-Segal.</span>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-arrow-types</span>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)                         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                                   </span><span class="c">-- A type.</span>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)                    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a><span class="err">  : isSegal (arr A)</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a><span class="err">  := is-segal-is-local-horn-inclusion (arr A)</span>
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a><span class="err">      (Segal-extension-types</span>
</span><span id="__span-10-36"><a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a><span class="err">        extext</span>
</span><span id="__span-10-37"><a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a><span class="err">        </span><span class="kt">2</span>
</span><span id="__span-10-38"><a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a><span class="err">        Δ¹</span>
</span><span id="__span-10-39"><a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a><span class="err">        (\{t : </span><span class="kt">2</span><span class="err"> | Δ¹ t} -&gt; A)</span>
</span><span id="__span-10-40"><a id="__codelineno-10-40" name="__codelineno-10-40" href="#__codelineno-10-40"></a><span class="err">        (\{t : </span><span class="kt">2</span><span class="err"> | Δ¹ t} -&gt; (isSegal-is-local-horn-inclusion A AisSegal)))</span>
</span></code></pre></div>
<h2 id="identity">Identity<a class="headerlink" href="#identity" title="Permanent link">&para;</a></h2>
<p>All types have identity arrows and witnesses to the identity composition law.</p>
<p><svg style="float: right" viewBox="0 0 200 180" width="150" height="150">
  <polyline points="40,30 160,30" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">x</text>
  <text x="100" y="15" fill="red">x</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c">-- [RS17, Definition 5.7]</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c">-- all types have identity arrows</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">id-arr</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)               </span><span class="c">-- A type.</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x </span><span class="p">:</span><span class="err"> A)               </span><span class="c">-- A point in A.</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="err">  : hom A x x</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="err">  := \{t : </span><span class="kt">2</span><span class="err"> | Δ¹ t} -&gt; x</span>
</span></code></pre></div>
<p>Witness for the right identity law:</p>
<p><svg style="float: right" viewBox="0 0 200 180" width="150" height="150">
  <path style="fill: rgb(255,128,0,0.5); stroke-cap: round;" d="M 52 40 L 160 40 L 160 148 Z"></path>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="40,40 160,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">y</text>
  <text x="170" y="170">y</text>
  <text x="100" y="15">f</text>
  <text x="185" y="100">y</text>
  <text x="90" y="110">f</text>
  <text x="125" y="75" stroke="red" fill="red">f</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c">-- [RS17, Proposition 5.8a]</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c">-- the right unit law for identity</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">comp-id-witness</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)                 </span><span class="c">-- Two points in A.</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow from x to y in A.</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="err">  : hom2 A x y y f (id-arr A y) f</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="err">  := \{(t, s) : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² (t, s)} -&gt; f t</span>
</span></code></pre></div>
<p>Witness for the left identity law:</p>
<p><svg style="float: right" viewBox="0 0 200 180" width="150" height="150">
  <path style="fill: rgb(255,128,0,0.5); stroke-cap: round;" d="M 52 40 L 160 40 L 160 148 Z"></path>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="40,40 160,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">x</text>
  <text x="170" y="170">y</text>
  <text x="100" y="15">x</text>
  <text x="185" y="100">f</text>
  <text x="90" y="110">f</text>
  <text x="125" y="75" stroke="red" fill="red">f</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c">-- [RS17, Proposition 5.8b]</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="c">-- the left unit law for identity</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">id-comp-witness</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)                 </span><span class="c">-- Two points in A.</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow from x to y in A.</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="err">  : hom2 A x x y (id-arr A x) f f</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="err">  := \{(t, s) : </span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err"> | Δ² (t, s)} -&gt; f s</span>
</span></code></pre></div>
<p>In a Segal type, where composition is unique, it follows that composition with
an identity arrow recovers the original arrow. Thus, an identity axiom was not
needed in the definition of Segal types.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c">-- If A is Segal then the right unit law holds</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-comp-id</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)                 </span><span class="c">-- Two points in A.</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow from x to y in A.</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="err">  : (Segal-comp A AisSegal x y y f (id-arr A y)) =_{hom A x y} f</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="err">  := Segal-comp-uniqueness</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="err">      A</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="err">      AisSegal</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="err">      x y y</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="err">      f</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="err">      (id-arr A y)</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="err">      f</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="err">      (comp-id-witness A x y f)</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="c">-- If A is Segal then the left unit law holds</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-id-comp</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)                 </span><span class="c">-- Two points in A.</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow from x to y in A.</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="err">  : (Segal-comp A AisSegal x x y (id-arr A x) f) =_{hom A x y} f</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="err">  := Segal-comp-uniqueness</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="err">      A</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="err">      AisSegal</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="err">      x x y</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="err">      (id-arr A x)</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="err">      f</span>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="err">      f</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="err">      (id-comp-witness A x y f)</span>
</span></code></pre></div>
<h2 id="associativity">Associativity<a class="headerlink" href="#associativity" title="Permanent link">&para;</a></h2>
<p>We now prove that composition in a Segal type is associative, by using the fact
that the type of arrows in a Segal type is itself a Segal type.</p>
<p><svg style="float: right" viewBox="0 0 200 180" width="150" height="150">
  <path style="fill: rgb(128,128,128,0.5); stroke-cap: round;" d="M 52 40 L 160 40 L 160 148 Z"></path>
  <path style="fill: rgb(256,128,0,0.5); stroke-cap: round;" d="M 40 52 L 40 160 L 148 160 Z"></path>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="40,40 160,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="30,40 30,160" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="45,170 160,170" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <text x="30" y="30">•</text>
  <text x="170" y="30">•</text>
  <text x="170" y="170">•</text>
  <text x="30" y="170" fill="red">•</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">unfolding-square</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                         </span><span class="c">-- A type.</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">triangle </span><span class="p">:</span><span class="err"> Δ² -&gt; A)            </span><span class="c">-- A triangle in A.</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="err">  : Δ¹×Δ¹ -&gt; A                    </span><span class="c">-- A square in A, defined by gluing</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="err">  := \(t, s) -&gt;                   </span><span class="c">-- two copies of the triangle along the common diagonal edge.</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="err">    </span><span class="no">recOR</span><span class="err">(t </span><span class="o">&lt;=</span><span class="err"> s |-&gt; triangle (s , t),</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="err">        s </span><span class="o">&lt;=</span><span class="err"> t |-&gt; triangle (t , s))</span>
</span></code></pre></div>
<p>For use in the proof of associativity:</p>
<p><svg style="float: right" viewBox="0 0 200 200" width="150" height="150">
  <path style="fill: rgb(256,128,0,0.5); stroke-cap: round;" d="M 52 40 L 160 40 L 160 148 Z"></path>
  <path style="fill: rgb(256,128,0,0.5); stroke-cap: round;" d="M 40 52 L 40 160 L 148 160 Z"></path>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="40,40 160,160" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="30,40 30,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="45,170 160,170" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">y</text>
  <text x="170" y="170">z</text>
  <text x="30" y="170">y</text>
  <text x="100" y="15">f</text>
  <text x="185" y="100">g</text>
  <text x="90" y="110" transform="rotate(45, 90, 110)" fill="red">Segal-comp</text>
  <text x="100" y="190">g</text>
  <text x="15" y="100">f</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-comp-witness-square</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)                   </span><span class="c">-- Three points in A.</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)               </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)               </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="err">  : Δ¹×Δ¹ -&gt; A</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="err">  := unfolding-square A (Segal-comp-witness A AisSegal x y z f g)</span>
</span></code></pre></div>
<p>The <code>Segal-comp-witness-square</code> as an arrow in the arrow type:</p>
<p><svg style="float: right" viewBox="0 0 200 200" width="150" height="150">
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="30,40 30,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="40,100 160,100" stroke="red" stroke-width="6" marker-end="url(#arrow-red)"></polyline>
  <text x="30" y="30">x</text>
  <text x="170" y="30">y</text>
  <text x="170" y="170">z</text>
  <text x="30" y="170">y</text>
  <text x="15" y="100">f</text>
  <text x="185" y="100">g</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-arr-in-arr</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                       </span><span class="c">-- A type.</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)        </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)                   </span><span class="c">-- Three points in A.</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)               </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)               </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="err">  : hom (arr A) f g</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="err">  := </span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; </span><span class="p">\</span><span class="nv">s </span><span class="err">-&gt; (Segal-comp-witness-square A AisSegal x y z f g) (t, s)</span>
</span></code></pre></div>
<p><svg style="float: right" viewBox="0 0 200 250" width="150" height="200">
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="30,40 30,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="40,100 160,100" stroke="red" stroke-width="6" marker-end="url(#arrow-red)"></polyline>
  <polyline points="40,30 160,30" stroke="lightgrey" stroke-width="3"></polyline>
  <polyline points="40,170 160,170" stroke="lightgrey" stroke-width="3"></polyline>
  <path style="fill: rgb(256,128,0,0.5); stroke-cap: round;" d="M 40 100 L 160 100 L 100 130 Z"></path>
  <polyline points="100,70 100,190" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="155,105 105,130" stroke="red" stroke-width="6" marker-end="url(#arrow-red)"></polyline>
  <polyline points="45,105 95,130" stroke="red" stroke-width="6" marker-end="url(#arrow-red)"></polyline>
  <polyline points="155,35 105,55" stroke="lightgrey" stroke-width="3"></polyline>
  <polyline points="45,35 95,55" stroke="lightgrey" stroke-width="3"></polyline>
  <polyline points="155,175 105,195" stroke="lightgrey" stroke-width="3"></polyline>
  <polyline points="45,175 95,195" stroke="lightgrey" stroke-width="3"></polyline>
  <text x="30" y="30">w</text>
  <text x="170" y="30">x</text>
  <text x="30" y="170">x</text>
  <text x="170" y="170">y</text>
  <text x="100" y="60">y</text>
  <text x="100" y="200">z</text>
  <text x="15" y="100">f</text>
  <text x="185" y="100">g</text>
  <text x="90" y="150">h</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-associativity-witness</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="err">  : hom2 (arr A) f g h</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="err">      (Segal-arr-in-arr A AisSegal w x y f g)</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="err">      (Segal-arr-in-arr A AisSegal x y z g h)</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="err">      (Segal-comp (arr A) (Segal-arrow-types extext A AisSegal)</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="err">      f g h</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="err">      (Segal-arr-in-arr A AisSegal w x y f g)</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="err">      (Segal-arr-in-arr A AisSegal x y z g h))</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="err">  := (Segal-comp-witness (arr A) (Segal-arrow-types extext A AisSegal)</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="err">      f g h</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="err">      (Segal-arr-in-arr A AisSegal w x y f g)</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="err">      (Segal-arr-in-arr A AisSegal x y z g h))</span>
</span></code></pre></div>
<p><svg style="float: right" viewBox="0 0 200 250" width="150" height="200">
  <path style="fill: rgb(256,128,0,0.5); stroke-cap: round;"
    d="M 35 35 L 165 35 L 165 165 L 102 190 Z"></path>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="30,40 95,190" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="40,40 160,160" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="160,40 110,180" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="155,175 110,195" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">w</text>
  <text x="170" y="30">x</text>
  <text x="170" y="170">y</text>
  <text x="100" y="200">z</text>
  <text x="185" y="100">g</text>
  <text x="100" y="15">f</text>
  <text x="140" y="205">h</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c">-- The Segal-associativity-witness curries to define a diagram Δ²×Δ¹ -&gt; A.</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="c">-- The Segal-associativity-tetrahedron is extracted via the middle-simplex map \((t, s), r) -&gt; ((t, r), s) from Δ³ to Δ²×Δ¹</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-associativity-tetrahedron</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="err">  : Δ³ -&gt; A</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="err">  := \((t, s), r) -&gt;</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="err">    (Segal-associativity-witness extext A AisSegal w x y z f g h) (t, r) s</span>
</span></code></pre></div>
<p><svg style="float: right" viewBox="0 0 200 250" width="150" height="200">
  <path style="fill: rgb(128,128,128,0.5); stroke-cap: round;"
    d="M 35 35 L 165 35 L 165 165 L 102 190 Z"></path>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="30,40 95,190" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="40,40 160,160" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="160,40 110,180" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="155,175 110,195" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">w</text>
  <text x="170" y="30">x</text>
  <text x="170" y="170">y</text>
  <text x="100" y="200">z</text>
  <text x="185" y="100">g</text>
  <text x="100" y="15">f</text>
  <text x="140" y="205">h</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c">-- the diagonal composite of three arrows extracted from the Segal-associativity-tetrahedron</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-triple-composite</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="err">  : hom A w z</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="err">  := </span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt;</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="err">    (Segal-associativity-tetrahedron extext A AisSegal w x y z f g h) ((t, t), t)</span>
</span></code></pre></div>
<p><svg style="float: right" viewBox="0 0 200 250" width="150" height="200">
  <path style="fill: rgb(128,128,128,0.5); stroke-cap: round;"
    d="M 40 35 L 165 35 L 165 160 Z"></path>
  <path style="fill: rgb(256,128,0,0.5); stroke-cap: round;"
    d="M 35 40 L 160 165 L 102 190 Z"></path>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="30,40 95,190" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="40,40 160,160" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="160,40 110,180" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="155,175 110,195" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">w</text>
  <text x="170" y="30">x</text>
  <text x="170" y="170">y</text>
  <text x="100" y="200">z</text>
  <text x="185" y="100">g</text>
  <text x="100" y="15">f</text>
  <text x="140" y="205">h</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-left-associativity-witness</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="err">  : hom2 A w y z</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="err">    (Segal-comp A AisSegal w x y f g)</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="err">    h</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="err">    (Segal-triple-composite extext A AisSegal w x y z f g h)</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="err">  := \(t, s) -&gt;</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="err">    (Segal-associativity-tetrahedron extext A AisSegal w x y z f g h) ((t, t), s)</span>
</span></code></pre></div>
<p>The front face:</p>
<p><svg style="float: right" viewBox="0 0 200 250" width="150" height="200">
  <path style="fill: rgb(256,128,0,0.5); stroke-cap: round;"
    d="M 35 35 L 155 35 L 100 185 Z"></path>
  <path style="fill: rgb(128,128,128,0.5); stroke-cap: round;"
    d="M 165 40 L 165 165 L 115 185 Z"></path>
  <polyline points="170,45 170,160" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="30,40 95,190" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="40,40 160,160" stroke="grey" stroke-width="3" marker-end="url(#arrow-grey)"></polyline>
  <polyline points="160,40 110,180" stroke="red" stroke-width="3" marker-end="url(#arrow-red)"></polyline>
  <polyline points="40,30 160,30" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <polyline points="155,175 110,195" stroke="black" stroke-width="3" marker-end="url(#arrow)"></polyline>
  <text x="30" y="30">w</text>
  <text x="170" y="30">x</text>
  <text x="170" y="170">y</text>
  <text x="100" y="200">z</text>
  <text x="185" y="100">g</text>
  <text x="100" y="15">f</text>
  <text x="140" y="205">h</text>
</svg></p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-right-associativity-witness</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="err">  : hom2 A w x z</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="err">    f</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="err">    (Segal-comp A AisSegal x y z g h)</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="err">    (Segal-triple-composite extext A AisSegal w x y z f g h)</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="err">  := \(t, s) -&gt;</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="err">    (Segal-associativity-tetrahedron extext A AisSegal w x y z f g h) ((t, s), s)</span>
</span></code></pre></div>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-left-associativity</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="err">  : (Segal-comp A AisSegal w y z (Segal-comp A AisSegal w x y f g) h) =</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="err">      (Segal-triple-composite extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="err">  := Segal-comp-uniqueness</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="err">        A AisSegal w y z (Segal-comp A AisSegal w x y f g) h</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="err">        (Segal-triple-composite extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="err">        (Segal-left-associativity-witness extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-right-associativity</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a><span class="err">  : (Segal-comp A AisSegal w x z f (Segal-comp A AisSegal x y z g h)) =</span>
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a><span class="err">      (Segal-triple-composite extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a><span class="err">  := Segal-comp-uniqueness</span>
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a><span class="err">        A AisSegal w x z f (Segal-comp A AisSegal x y z g h)</span>
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a><span class="err">        (Segal-triple-composite extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a><span class="err">        (Segal-right-associativity-witness extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a>
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-associativity</span>
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a><span class="err">  </span><span class="p">(</span><span class="nv">extext </span><span class="p">:</span><span class="err"> ExtExt)         </span><span class="c">-- This proof uses extension extensionality.</span>
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-23-34"><a id="__codelineno-23-34" name="__codelineno-23-34" href="#__codelineno-23-34"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-23-35"><a id="__codelineno-23-35" name="__codelineno-23-35" href="#__codelineno-23-35"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y z </span><span class="p">:</span><span class="err"> A)             </span><span class="c">-- Four points in A.</span>
</span><span id="__span-23-36"><a id="__codelineno-23-36" name="__codelineno-23-36" href="#__codelineno-23-36"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A w x)           </span><span class="c">-- An arrow in A from w to x.</span>
</span><span id="__span-23-37"><a id="__codelineno-23-37" name="__codelineno-23-37" href="#__codelineno-23-37"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A x y)           </span><span class="c">-- An arrow in A from x to y.</span>
</span><span id="__span-23-38"><a id="__codelineno-23-38" name="__codelineno-23-38" href="#__codelineno-23-38"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)           </span><span class="c">-- An arrow in A from y to z.</span>
</span><span id="__span-23-39"><a id="__codelineno-23-39" name="__codelineno-23-39" href="#__codelineno-23-39"></a><span class="err">  : (Segal-comp A AisSegal w y z (Segal-comp A AisSegal w x y f g) h) =</span>
</span><span id="__span-23-40"><a id="__codelineno-23-40" name="__codelineno-23-40" href="#__codelineno-23-40"></a><span class="err">      (Segal-comp A AisSegal w x z f (Segal-comp A AisSegal x y z g h))</span>
</span><span id="__span-23-41"><a id="__codelineno-23-41" name="__codelineno-23-41" href="#__codelineno-23-41"></a><span class="err">  := zig-zag-concat (hom A w z)</span>
</span><span id="__span-23-42"><a id="__codelineno-23-42" name="__codelineno-23-42" href="#__codelineno-23-42"></a><span class="err">      (Segal-comp A AisSegal w y z (Segal-comp A AisSegal w x y f g) h)</span>
</span><span id="__span-23-43"><a id="__codelineno-23-43" name="__codelineno-23-43" href="#__codelineno-23-43"></a><span class="err">      (Segal-triple-composite extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-44"><a id="__codelineno-23-44" name="__codelineno-23-44" href="#__codelineno-23-44"></a><span class="err">      (Segal-comp A AisSegal w x z f (Segal-comp A AisSegal x y z g h))</span>
</span><span id="__span-23-45"><a id="__codelineno-23-45" name="__codelineno-23-45" href="#__codelineno-23-45"></a><span class="err">      (Segal-left-associativity extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-46"><a id="__codelineno-23-46" name="__codelineno-23-46" href="#__codelineno-23-46"></a><span class="err">      (Segal-right-associativity extext A AisSegal w x y z f g h)</span>
</span><span id="__span-23-47"><a id="__codelineno-23-47" name="__codelineno-23-47" href="#__codelineno-23-47"></a>
</span><span id="__span-23-48"><a id="__codelineno-23-48" name="__codelineno-23-48" href="#__codelineno-23-48"></a>
</span><span id="__span-23-49"><a id="__codelineno-23-49" name="__codelineno-23-49" href="#__codelineno-23-49"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-postcomp</span>
</span><span id="__span-23-50"><a id="__codelineno-23-50" name="__codelineno-23-50" href="#__codelineno-23-50"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-23-51"><a id="__codelineno-23-51" name="__codelineno-23-51" href="#__codelineno-23-51"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-23-52"><a id="__codelineno-23-52" name="__codelineno-23-52" href="#__codelineno-23-52"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-23-53"><a id="__codelineno-23-53" name="__codelineno-23-53" href="#__codelineno-23-53"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-23-54"><a id="__codelineno-23-54" name="__codelineno-23-54" href="#__codelineno-23-54"></a><span class="err">  : </span><span class="p">(</span><span class="nv">z </span><span class="p">:</span><span class="err"> A) -&gt; (hom A z x) -&gt; (hom A z y)</span>
</span><span id="__span-23-55"><a id="__codelineno-23-55" name="__codelineno-23-55" href="#__codelineno-23-55"></a><span class="err">  := </span><span class="p">\</span><span class="nv">z </span><span class="err">-&gt; </span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; (Segal-comp A AisSegal z x y g f)</span>
</span><span id="__span-23-56"><a id="__codelineno-23-56" name="__codelineno-23-56" href="#__codelineno-23-56"></a>
</span><span id="__span-23-57"><a id="__codelineno-23-57" name="__codelineno-23-57" href="#__codelineno-23-57"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-precomp</span>
</span><span id="__span-23-58"><a id="__codelineno-23-58" name="__codelineno-23-58" href="#__codelineno-23-58"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-23-59"><a id="__codelineno-23-59" name="__codelineno-23-59" href="#__codelineno-23-59"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-23-60"><a id="__codelineno-23-60" name="__codelineno-23-60" href="#__codelineno-23-60"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-23-61"><a id="__codelineno-23-61" name="__codelineno-23-61" href="#__codelineno-23-61"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-23-62"><a id="__codelineno-23-62" name="__codelineno-23-62" href="#__codelineno-23-62"></a><span class="err">  : </span><span class="p">(</span><span class="nv">z </span><span class="p">:</span><span class="err"> A) -&gt; (hom A y z) -&gt; (hom A x z)</span>
</span><span id="__span-23-63"><a id="__codelineno-23-63" name="__codelineno-23-63" href="#__codelineno-23-63"></a><span class="err">  := </span><span class="p">\</span><span class="nv">z </span><span class="err">-&gt; </span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; (Segal-comp A AisSegal x y z f g)</span>
</span></code></pre></div>
<h2 id="homotopies">Homotopies<a class="headerlink" href="#homotopies" title="Permanent link">&para;</a></h2>
<p>We may define a "homotopy" to be a path between parallel arrows. In a Segal
type, homotopies are equivalent to terms in hom2 types involving an identity
arrow.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">homotopy-to-hom2</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> f = g)</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="err">  : (hom2 A x x y (id-arr A x) f g)</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="err">  := </span><span class="no">idJ</span><span class="err">(hom A x y, f,</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="err">          </span><span class="p">\</span><span class="nv">g&#39; p&#39; </span><span class="err">-&gt; (hom2 A x x y (id-arr A x) f g&#39;),</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="err">          (id-comp-witness A x y f), g, p)</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">homotopy-to-hom2-total-map</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="err">  : </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), f = g) -&gt;</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), (hom2 A x x y (id-arr A x) f g))</span>
</span><span id="__span-24-17"><a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="err">  := \(g, p) -&gt; (g, homotopy-to-hom2 A x y f g p)</span>
</span><span id="__span-24-18"><a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>
</span><span id="__span-24-19"><a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-homotopy-to-hom2-total-map-isEquiv</span>
</span><span id="__span-24-20"><a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-24-21"><a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-24-22"><a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-24-23"><a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-24-24"><a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a><span class="err">  : isEquiv</span>
</span><span id="__span-24-25"><a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), f = g)</span>
</span><span id="__span-24-26"><a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), (hom2 A x x y (id-arr A x) f g))</span>
</span><span id="__span-24-27"><a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="err">      (homotopy-to-hom2-total-map A x y f)</span>
</span><span id="__span-24-28"><a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="err">  := areContr-isEquiv</span>
</span><span id="__span-24-29"><a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="err">        </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), f = g)</span>
</span><span id="__span-24-30"><a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="err">        </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), (hom2 A x x y (id-arr A x) f g))</span>
</span><span id="__span-24-31"><a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a><span class="err">        (based-paths-contractible (hom A x y) f)</span>
</span><span id="__span-24-32"><a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="err">        (AisSegal x x y (id-arr A x) f)</span>
</span><span id="__span-24-33"><a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="err">        (homotopy-to-hom2-total-map A x y f)</span>
</span><span id="__span-24-34"><a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a>
</span><span id="__span-24-35"><a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="c">-- [RS17, Proposition 5.10]</span>
</span><span id="__span-24-36"><a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Eq-Segal-homotopy-hom2</span>
</span><span id="__span-24-37"><a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-24-38"><a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-24-39"><a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-24-40"><a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-24-41"><a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a><span class="err">  : Eq (f = g) (hom2 A x x y (id-arr A x) f g)</span>
</span><span id="__span-24-42"><a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a><span class="err">  := (homotopy-to-hom2 A x y f g,</span>
</span><span id="__span-24-43"><a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a><span class="err">    total-equiv-family-of-equiv (hom A x y)</span>
</span><span id="__span-24-44"><a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a><span class="err">      (</span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; (f = g))</span>
</span><span id="__span-24-45"><a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a><span class="err">      (</span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; (hom2 A x x y (id-arr A x) f g))</span>
</span><span id="__span-24-46"><a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a><span class="err">      (homotopy-to-hom2 A x y f)</span>
</span><span id="__span-24-47"><a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a><span class="err">      (Segal-homotopy-to-hom2-total-map-isEquiv A AisSegal x y f)</span>
</span><span id="__span-24-48"><a id="__codelineno-24-48" name="__codelineno-24-48" href="#__codelineno-24-48"></a><span class="err">      g)</span>
</span></code></pre></div>
<p>A dual notion of homotopy can be defined similarly.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">homotopy-to-hom2&#39;</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> f = g)</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="err">  : (hom2 A x y y f (id-arr A y) g)</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="err">  := </span><span class="no">idJ</span><span class="err">(hom A x y, f,</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="err">          </span><span class="p">\</span><span class="nv">g&#39; p&#39; </span><span class="err">-&gt; (hom2 A x y y f (id-arr A y) g&#39;),</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="err">          (comp-id-witness A x y f), g, p)</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">homotopy-to-hom2&#39;-total-map</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-25-15"><a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="err">  : </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), f = g) -&gt;</span>
</span><span id="__span-25-16"><a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), (hom2 A x y y f (id-arr A y) g))</span>
</span><span id="__span-25-17"><a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a><span class="err">  := \(g, p) -&gt; (g, homotopy-to-hom2&#39; A x y f g p)</span>
</span><span id="__span-25-18"><a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>
</span><span id="__span-25-19"><a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-homotopy-to-hom2&#39;-total-map-isEquiv</span>
</span><span id="__span-25-20"><a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-25-21"><a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-25-22"><a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-25-23"><a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-25-24"><a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="err">  : isEquiv</span>
</span><span id="__span-25-25"><a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), f = g)</span>
</span><span id="__span-25-26"><a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), (hom2 A x y y f (id-arr A y) g))</span>
</span><span id="__span-25-27"><a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a><span class="err">      (homotopy-to-hom2&#39;-total-map A x y f)</span>
</span><span id="__span-25-28"><a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a><span class="err">  := areContr-isEquiv</span>
</span><span id="__span-25-29"><a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a><span class="err">        </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), f = g)</span>
</span><span id="__span-25-30"><a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a><span class="err">        </span><span class="p">(</span><span class="nv">Σ (g </span><span class="p">:</span><span class="err"> hom A x y), (hom2 A x y y f (id-arr A y) g))</span>
</span><span id="__span-25-31"><a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a><span class="err">        (based-paths-contractible (hom A x y) f)</span>
</span><span id="__span-25-32"><a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a><span class="err">        (AisSegal x y y f (id-arr A y))</span>
</span><span id="__span-25-33"><a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a><span class="err">        (homotopy-to-hom2&#39;-total-map A x y f)</span>
</span><span id="__span-25-34"><a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a>
</span><span id="__span-25-35"><a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a><span class="c">-- [RS17, Proposition 5.10]</span>
</span><span id="__span-25-36"><a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Eq-Segal-homotopy-hom2&#39;</span>
</span><span id="__span-25-37"><a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-25-38"><a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-25-39"><a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-25-40"><a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-25-41"><a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a><span class="err">  : Eq (f = g) (hom2 A x y y f (id-arr A y) g)</span>
</span><span id="__span-25-42"><a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a><span class="err">  := (homotopy-to-hom2&#39; A x y f g,</span>
</span><span id="__span-25-43"><a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a><span class="err">    total-equiv-family-of-equiv (hom A x y)</span>
</span><span id="__span-25-44"><a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a><span class="err">      (</span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; (f = g))</span>
</span><span id="__span-25-45"><a id="__codelineno-25-45" name="__codelineno-25-45" href="#__codelineno-25-45"></a><span class="err">      (</span><span class="p">\</span><span class="nv">g </span><span class="err">-&gt; (hom2 A x y y f (id-arr A y) g))</span>
</span><span id="__span-25-46"><a id="__codelineno-25-46" name="__codelineno-25-46" href="#__codelineno-25-46"></a><span class="err">      (homotopy-to-hom2&#39; A x y f)</span>
</span><span id="__span-25-47"><a id="__codelineno-25-47" name="__codelineno-25-47" href="#__codelineno-25-47"></a><span class="err">      (Segal-homotopy-to-hom2&#39;-total-map-isEquiv A AisSegal x y f)</span>
</span><span id="__span-25-48"><a id="__codelineno-25-48" name="__codelineno-25-48" href="#__codelineno-25-48"></a><span class="err">      g)</span>
</span></code></pre></div>
<p>More generally, a homotopy between a composite and another map is equivalent to
the data provided by a commutative triangle with that boundary.</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-eq-to-hom2</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A x z)</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> (Segal-comp A AisSegal x y z f g) = h)</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="err">  : (hom2 A x y z f g h)</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="err">  := </span><span class="no">idJ</span><span class="err">(hom A x z, (Segal-comp A AisSegal x y z f g),</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="err">          </span><span class="p">\</span><span class="nv">h&#39; p&#39; </span><span class="err">-&gt; (hom2 A x y z f g h&#39;),</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="err">          Segal-comp-witness A AisSegal x y z f g, h, p)</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-eq-to-hom2-total-map</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="err">  : </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), (Segal-comp A AisSegal x y z f g) = h) -&gt;</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), (hom2 A x y z f g h))</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="err">  := \(h, p) -&gt; (h, Segal-eq-to-hom2 A AisSegal x y z f g h p)</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-eq-to-hom2-total-map-isEquiv</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a><span class="err">  : isEquiv</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), (Segal-comp A AisSegal x y z f g) = h)</span>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a><span class="err">      </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), (hom2 A x y z f g h))</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a><span class="err">      (Segal-eq-to-hom2-total-map A AisSegal x y z f g)</span>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a><span class="err">  := areContr-isEquiv</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a><span class="err">        </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), (Segal-comp A AisSegal x y z f g) = h)</span>
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a><span class="err">        </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom A x z), (hom2 A x y z f g h))</span>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a><span class="err">        (based-paths-contractible (hom A x z) (Segal-comp A AisSegal x y z f g) )</span>
</span><span id="__span-26-38"><a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a><span class="err">        (AisSegal x y z f g)</span>
</span><span id="__span-26-39"><a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a><span class="err">        (Segal-eq-to-hom2-total-map A AisSegal x y z f g)</span>
</span><span id="__span-26-40"><a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a>
</span><span id="__span-26-41"><a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a><span class="c">-- [RS17, Proposition 5.12]</span>
</span><span id="__span-26-42"><a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Eq-Segal-eq-hom2</span>
</span><span id="__span-26-43"><a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)</span>
</span><span id="__span-26-44"><a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)</span>
</span><span id="__span-26-45"><a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-26-46"><a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a><span class="err">  </span><span class="p">(</span><span class="nv">f </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-26-47"><a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a><span class="err">  </span><span class="p">(</span><span class="nv">g </span><span class="p">:</span><span class="err"> hom A y z)</span>
</span><span id="__span-26-48"><a id="__codelineno-26-48" name="__codelineno-26-48" href="#__codelineno-26-48"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A x z)</span>
</span><span id="__span-26-49"><a id="__codelineno-26-49" name="__codelineno-26-49" href="#__codelineno-26-49"></a><span class="err">  : Eq ((Segal-comp A AisSegal x y z f g) = h) (hom2 A x y z f g h)</span>
</span><span id="__span-26-50"><a id="__codelineno-26-50" name="__codelineno-26-50" href="#__codelineno-26-50"></a><span class="err">  := (Segal-eq-to-hom2 A AisSegal x y z f g h,</span>
</span><span id="__span-26-51"><a id="__codelineno-26-51" name="__codelineno-26-51" href="#__codelineno-26-51"></a><span class="err">    total-equiv-family-of-equiv (hom A x z)</span>
</span><span id="__span-26-52"><a id="__codelineno-26-52" name="__codelineno-26-52" href="#__codelineno-26-52"></a><span class="err">      (</span><span class="p">\</span><span class="nv">h </span><span class="err">-&gt; (Segal-comp A AisSegal x y z f g) = h)</span>
</span><span id="__span-26-53"><a id="__codelineno-26-53" name="__codelineno-26-53" href="#__codelineno-26-53"></a><span class="err">      (</span><span class="p">\</span><span class="nv">h </span><span class="err">-&gt; hom2 A x y z f g h)</span>
</span><span id="__span-26-54"><a id="__codelineno-26-54" name="__codelineno-26-54" href="#__codelineno-26-54"></a><span class="err">      (Segal-eq-to-hom2 A AisSegal x y z f g)</span>
</span><span id="__span-26-55"><a id="__codelineno-26-55" name="__codelineno-26-55" href="#__codelineno-26-55"></a><span class="err">      (Segal-eq-to-hom2-total-map-isEquiv A AisSegal x y z f g)</span>
</span><span id="__span-26-56"><a id="__codelineno-26-56" name="__codelineno-26-56" href="#__codelineno-26-56"></a><span class="err">      h)</span>
</span></code></pre></div>
<p>Homotopies form a congruence, meaning that homotopies are respected by
composition:</p>
<div class="language-rzk highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c">-- [RS17, Proposition 5.13]</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-homotopy-congruence</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="err">  </span><span class="p">(</span><span class="nv">h k </span><span class="p">:</span><span class="err"> hom A y z)</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> f = g)</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="err">  </span><span class="p">(</span><span class="nv">q </span><span class="p">:</span><span class="err"> h = k)</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="err">  : (Segal-comp A AisSegal x y z f h) = (Segal-comp A AisSegal x y z g k)</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="err">  := </span><span class="no">idJ</span><span class="err">(hom A y z, h, </span><span class="p">\</span><span class="nv">k&#39; q&#39; </span><span class="err">-&gt; (Segal-comp A AisSegal x y z f h) = (Segal-comp A AisSegal x y z g k&#39;),</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="err">    </span><span class="no">idJ</span><span class="err">(hom A x y, f, </span><span class="p">\</span><span class="nv">g&#39; p&#39; </span><span class="err">-&gt; (Segal-comp A AisSegal x y z f h) = (Segal-comp A AisSegal x y z g&#39; h), </span><span class="no">refl</span><span class="err">, g, p)</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="err">    , k, q)</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a><span class="c">-- As a special case of the above:</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-homotopy-postwhisker</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)</span>
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> f = g)</span>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a><span class="err">  : (Segal-comp A AisSegal x y z f h) = (Segal-comp A AisSegal x y z g h)</span>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a><span class="err">  := Segal-homotopy-congruence A AisSegal x y z f g h h p </span><span class="no">refl</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a><span class="c">-- As a special case of the above:</span>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-homotopy-prewhisker</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-27-29"><a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-27-30"><a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-27-31"><a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a><span class="err">  </span><span class="p">(</span><span class="nv">k </span><span class="p">:</span><span class="err"> hom A w x)</span>
</span><span id="__span-27-32"><a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-27-33"><a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> f = g)</span>
</span><span id="__span-27-34"><a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a><span class="err">  : (Segal-comp A AisSegal w x y k f) = (Segal-comp A AisSegal w x y k g)</span>
</span><span id="__span-27-35"><a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a><span class="err">  := Segal-homotopy-congruence A AisSegal w x y k k f g </span><span class="no">refl</span><span class="err"> p</span>
</span><span id="__span-27-36"><a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a>
</span><span id="__span-27-37"><a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a><span class="c">-- [RS17, Proposition 5.14(a)]</span>
</span><span id="__span-27-38"><a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-homotopy-postwhisker-is-ap</span>
</span><span id="__span-27-39"><a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-27-40"><a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-27-41"><a id="__codelineno-27-41" name="__codelineno-27-41" href="#__codelineno-27-41"></a><span class="err">  </span><span class="p">(</span><span class="nv">x y z </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-27-42"><a id="__codelineno-27-42" name="__codelineno-27-42" href="#__codelineno-27-42"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-27-43"><a id="__codelineno-27-43" name="__codelineno-27-43" href="#__codelineno-27-43"></a><span class="err">  </span><span class="p">(</span><span class="nv">h </span><span class="p">:</span><span class="err"> hom A y z)</span>
</span><span id="__span-27-44"><a id="__codelineno-27-44" name="__codelineno-27-44" href="#__codelineno-27-44"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> f = g)</span>
</span><span id="__span-27-45"><a id="__codelineno-27-45" name="__codelineno-27-45" href="#__codelineno-27-45"></a><span class="err">  : (Segal-homotopy-postwhisker A AisSegal x y z f g h p) =</span>
</span><span id="__span-27-46"><a id="__codelineno-27-46" name="__codelineno-27-46" href="#__codelineno-27-46"></a><span class="err">    ap (hom A x y) (hom A x z) f g (</span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; Segal-comp A AisSegal x y z k h) p</span>
</span><span id="__span-27-47"><a id="__codelineno-27-47" name="__codelineno-27-47" href="#__codelineno-27-47"></a><span class="err">  := </span><span class="no">idJ</span><span class="err">(hom A x y, f, </span><span class="p">\</span><span class="nv">g&#39; p&#39; </span><span class="err">-&gt; (Segal-homotopy-postwhisker A AisSegal x y z f g&#39; h p&#39;) =</span>
</span><span id="__span-27-48"><a id="__codelineno-27-48" name="__codelineno-27-48" href="#__codelineno-27-48"></a><span class="err">    ap (hom A x y) (hom A x z) f g&#39; (</span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; Segal-comp A AisSegal x y z k h) p&#39;, </span><span class="no">refl</span><span class="err">, g, p)</span>
</span><span id="__span-27-49"><a id="__codelineno-27-49" name="__codelineno-27-49" href="#__codelineno-27-49"></a>
</span><span id="__span-27-50"><a id="__codelineno-27-50" name="__codelineno-27-50" href="#__codelineno-27-50"></a><span class="c">-- [RS17, Proposition 5.14(b)]</span>
</span><span id="__span-27-51"><a id="__codelineno-27-51" name="__codelineno-27-51" href="#__codelineno-27-51"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">Segal-homotopy-prewhisker-is-ap</span>
</span><span id="__span-27-52"><a id="__codelineno-27-52" name="__codelineno-27-52" href="#__codelineno-27-52"></a><span class="err">  </span><span class="p">(</span><span class="nv">A </span><span class="p">:</span><span class="err"> </span><span class="kt">U</span><span class="err">)                   </span><span class="c">-- A type.</span>
</span><span id="__span-27-53"><a id="__codelineno-27-53" name="__codelineno-27-53" href="#__codelineno-27-53"></a><span class="err">  </span><span class="p">(</span><span class="nv">AisSegal </span><span class="p">:</span><span class="err"> isSegal A)    </span><span class="c">-- A proof that A is Segal.</span>
</span><span id="__span-27-54"><a id="__codelineno-27-54" name="__codelineno-27-54" href="#__codelineno-27-54"></a><span class="err">  </span><span class="p">(</span><span class="nv">w x y </span><span class="p">:</span><span class="err"> A)</span>
</span><span id="__span-27-55"><a id="__codelineno-27-55" name="__codelineno-27-55" href="#__codelineno-27-55"></a><span class="err">  </span><span class="p">(</span><span class="nv">k </span><span class="p">:</span><span class="err"> hom A w x)</span>
</span><span id="__span-27-56"><a id="__codelineno-27-56" name="__codelineno-27-56" href="#__codelineno-27-56"></a><span class="err">  </span><span class="p">(</span><span class="nv">f g </span><span class="p">:</span><span class="err"> hom A x y)</span>
</span><span id="__span-27-57"><a id="__codelineno-27-57" name="__codelineno-27-57" href="#__codelineno-27-57"></a><span class="err">  </span><span class="p">(</span><span class="nv">p </span><span class="p">:</span><span class="err"> f = g)</span>
</span><span id="__span-27-58"><a id="__codelineno-27-58" name="__codelineno-27-58" href="#__codelineno-27-58"></a><span class="err">  : (Segal-homotopy-prewhisker A AisSegal w x y k f g p) =</span>
</span><span id="__span-27-59"><a id="__codelineno-27-59" name="__codelineno-27-59" href="#__codelineno-27-59"></a><span class="err">    ap (hom A x y) (hom A w y) f g (Segal-comp A AisSegal w x y k) p</span>
</span><span id="__span-27-60"><a id="__codelineno-27-60" name="__codelineno-27-60" href="#__codelineno-27-60"></a><span class="err">  := </span><span class="no">idJ</span><span class="err">(hom A x y, f, </span><span class="p">\</span><span class="nv">g&#39; p&#39; </span><span class="err">-&gt; (Segal-homotopy-prewhisker A AisSegal w x y k f g&#39; p&#39;) =</span>
</span><span id="__span-27-61"><a id="__codelineno-27-61" name="__codelineno-27-61" href="#__codelineno-27-61"></a><span class="err">    ap (hom A x y) (hom A w y) f g&#39; (Segal-comp A AisSegal w x y k) p&#39;, </span><span class="no">refl</span><span class="err">, g, p)</span>
</span><span id="__span-27-62"><a id="__codelineno-27-62" name="__codelineno-27-62" href="#__codelineno-27-62"></a>
</span><span id="__span-27-63"><a id="__codelineno-27-63" name="__codelineno-27-63" href="#__codelineno-27-63"></a><span class="nd">#section</span><span class="ni"> isSegal-Unit</span>
</span><span id="__span-27-64"><a id="__codelineno-27-64" name="__codelineno-27-64" href="#__codelineno-27-64"></a>
</span><span id="__span-27-65"><a id="__codelineno-27-65" name="__codelineno-27-65" href="#__codelineno-27-65"></a><span class="kd">#variable</span><span class="p"> </span><span class="nv">extext</span><span class="err"> : ExtExt</span>
</span><span id="__span-27-66"><a id="__codelineno-27-66" name="__codelineno-27-66" href="#__codelineno-27-66"></a>
</span><span id="__span-27-67"><a id="__codelineno-27-67" name="__codelineno-27-67" href="#__codelineno-27-67"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">iscontr-Unit</span><span class="err"> : isContr </span><span class="kt">Unit</span><span class="err"> := (</span><span class="no">unit</span><span class="err">, </span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">)</span>
</span><span id="__span-27-68"><a id="__codelineno-27-68" name="__codelineno-27-68" href="#__codelineno-27-68"></a>
</span><span id="__span-27-69"><a id="__codelineno-27-69" name="__codelineno-27-69" href="#__codelineno-27-69"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">isContr-Δ²→Unit</span><span class="p"> </span><span class="k">uses</span><span class="p"> (</span><span class="nv">extext</span><span class="p">)</span>
</span><span id="__span-27-70"><a id="__codelineno-27-70" name="__codelineno-27-70" href="#__codelineno-27-70"></a><span class="err">  : isContr (Δ² -&gt; </span><span class="kt">Unit</span><span class="err">)</span>
</span><span id="__span-27-71"><a id="__codelineno-27-71" name="__codelineno-27-71" href="#__codelineno-27-71"></a><span class="err">  := (</span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="no">unit</span><span class="err">, </span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; eq-ext-htpy extext</span>
</span><span id="__span-27-72"><a id="__codelineno-27-72" name="__codelineno-27-72" href="#__codelineno-27-72"></a><span class="err">    (</span><span class="kt">2</span><span class="err"> * </span><span class="kt">2</span><span class="err">) Δ² (</span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="no">BOT</span><span class="err">)</span>
</span><span id="__span-27-73"><a id="__codelineno-27-73" name="__codelineno-27-73" href="#__codelineno-27-73"></a><span class="err">    (</span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="kt">Unit</span><span class="err">) (</span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="no">recBOT</span><span class="err">)</span>
</span><span id="__span-27-74"><a id="__codelineno-27-74" name="__codelineno-27-74" href="#__codelineno-27-74"></a><span class="err">    (</span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="no">unit</span><span class="err">) k</span>
</span><span id="__span-27-75"><a id="__codelineno-27-75" name="__codelineno-27-75" href="#__codelineno-27-75"></a><span class="err">    (</span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">)</span>
</span><span id="__span-27-76"><a id="__codelineno-27-76" name="__codelineno-27-76" href="#__codelineno-27-76"></a><span class="err">    )</span>
</span><span id="__span-27-77"><a id="__codelineno-27-77" name="__codelineno-27-77" href="#__codelineno-27-77"></a>
</span><span id="__span-27-78"><a id="__codelineno-27-78" name="__codelineno-27-78" href="#__codelineno-27-78"></a><span class="kd">#def</span><span class="p"> </span><span class="nf">isSegal-Unit</span><span class="p"> </span><span class="k">uses</span><span class="p"> (</span><span class="nv">extext</span><span class="p">)</span>
</span><span id="__span-27-79"><a id="__codelineno-27-79" name="__codelineno-27-79" href="#__codelineno-27-79"></a><span class="err">  : isSegal </span><span class="kt">Unit</span>
</span><span id="__span-27-80"><a id="__codelineno-27-80" name="__codelineno-27-80" href="#__codelineno-27-80"></a><span class="err">  := </span><span class="p">\</span><span class="nv">x y z f g </span><span class="err">-&gt; isRetract-ofContr-isContr</span>
</span><span id="__span-27-81"><a id="__codelineno-27-81" name="__codelineno-27-81" href="#__codelineno-27-81"></a><span class="err">    </span><span class="p">(</span><span class="nv">Σ (h </span><span class="p">:</span><span class="err"> hom </span><span class="kt">Unit</span><span class="err"> x z), hom2 </span><span class="kt">Unit</span><span class="err"> x y z f g h)</span>
</span><span id="__span-27-82"><a id="__codelineno-27-82" name="__codelineno-27-82" href="#__codelineno-27-82"></a><span class="err">    (Δ² -&gt; </span><span class="kt">Unit</span><span class="err">)</span>
</span><span id="__span-27-83"><a id="__codelineno-27-83" name="__codelineno-27-83" href="#__codelineno-27-83"></a><span class="err">    (\(_, k) -&gt; k, (</span><span class="p">\</span><span class="nv">k </span><span class="err">-&gt; (</span><span class="p">\</span><span class="nv">t </span><span class="err">-&gt; k (t, t), k), </span><span class="p">\</span><span class="nv">_ </span><span class="err">-&gt; </span><span class="no">refl</span><span class="err">))</span>
</span><span id="__span-27-84"><a id="__codelineno-27-84" name="__codelineno-27-84" href="#__codelineno-27-84"></a><span class="err">    isContr-Δ²→Unit</span>
</span><span id="__span-27-85"><a id="__codelineno-27-85" name="__codelineno-27-85" href="#__codelineno-27-85"></a>
</span><span id="__span-27-86"><a id="__codelineno-27-86" name="__codelineno-27-86" href="#__codelineno-27-86"></a><span class="nd">#end</span><span class="ni"> isSegal-Unit</span>
</span></code></pre></div>
<!-- Definitions for the SVG images above -->
<p><svg width="0" height="0">
  <defs>
    <style data-bx-fonts="Noto Serif">@import url(https://fonts.googleapis.com/css2?family=Noto+Serif&amp;display=swap);</style>
    <marker
      id="arrow-blue"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="5"
      markerHeight="5"
      orient="auto-start-reverse">
      <path d="M 0 2 L 5 5 L 0 8 z" stroke="blue" fill="blue" />
    </marker>
    <marker
      id="arrow-red"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="5"
      markerHeight="5"
      orient="auto-start-reverse">
      <path d="M 0 2 L 5 5 L 0 8 z" stroke="red" fill="red" />
    </marker>
    <marker
      id="arrow-grey"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="5"
      markerHeight="5"
      orient="auto-start-reverse">
      <path d="M 0 2 L 5 5 L 0 8 z" stroke="grey" fill="grey" />
    </marker>
    <marker
      id="arrow"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="5"
      markerHeight="5"
      orient="auto-start-reverse">
      <path d="M 0 2 L 5 5 L 0 8 z" stroke="black" fill="black" />
    </marker>
  </defs>
<br />
<style>
    text, textPath {
      font-family: Noto Serif;
      font-size: 20px;
      dominant-baseline: middle;
      text-anchor: middle;
    }
  </style></p>
<p></svg></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../04-extension-types.rzk/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Extension Types" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Extension Types
            </div>
          </div>
        </a>
      
      
        
        <a href="../06-2cat-of-segal-types.rzk/" class="md-footer__link md-footer__link--next" aria-label="Next: 2-Category of Segal Types" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              2-Category of Segal Types
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.action.edit", "navigation.footer", "navigation.sections", "navigation.path"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
        <script src="../../javascript/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>